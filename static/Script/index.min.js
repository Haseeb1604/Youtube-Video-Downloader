const $=selector=>document.querySelector(selector);let toggleFormBtn=(downloadbtn,loadbtn,load=!0)=>{load?(downloadbtn.style.display="none",loadbtn.style.display="block"):(loadbtn.style.display="none",downloadbtn.style.display="block")};const main=()=>{const youtubeForm=$("#youtubeForm"),downloadform=$("#downloadForm");youtubeForm.addEventListener("submit",e=>{e.preventDefault();let formData=new FormData(youtubeForm);ajax({url:"/youtube",method:"POST",data:formData,onprogress:()=>{toggleFormBtn($("#youtube_download_btn"),$("#youtube_loading_btn"),!0)},onsuccess:response=>{if(toggleFormBtn($("#youtube_download_btn"),$("#youtube_loading_btn"),!1),(response=JSON.parse(response)).url){downloadform.style.display="block",downloadform.querySelector(".thumbnail_img").src=response.url,downloadform.querySelector(".card-title").innerHTML=response.title;for(const[key,item]of Object.entries(response.stream))downloadform.querySelector(".form-select").innerHTML+=`\n              <option value="${key}"> ${item} </option>\n              `}else $("#alert-box").style.display="block",$("#alert-box span").innerHTML=response.error},onfailure:(status,statusText)=>{toggleFormBtn($("#youtube_download_btn"),$("#youtube_loading_btn"),!1),$("#alert-box").style.display="block",$("#alert-box span").innerHTML=`${status} ${statusText}! Something went wrong`}})})};window.onload=()=>main();